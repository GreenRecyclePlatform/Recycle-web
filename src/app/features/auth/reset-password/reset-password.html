<div class="reset-password-container">
  <div class="reset-password-background">
    <div class="reset-password-blur reset-password-blur-1"></div>
    <div class="reset-password-blur reset-password-blur-2"></div>
  </div>

  <mat-card class="reset-password-card">
    <mat-card-header class="text-center pb-4 d-flex flex-column-reverse">
      <div class="d-flex justify-content-center mb-3">
        <div
          class="reset-password-icon-container bg-primary-green rounded d-flex align-items-center justify-content-center"
        >
          <lucide-icon [name]="Leaf" [size]="40" class="text-white"></lucide-icon>
        </div>
      </div>
      <mat-card-title class="h3 text-dark">Reset Password</mat-card-title>
      <mat-card-subtitle>Enter your new password below</mat-card-subtitle>
      <mat-card-title class="h4 text-dark mt-2">The Link Expire in 30 Minutes</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <!-- @if(!isSubmitted){-->
      <form [formGroup]="resetPasswordForm" (ngSubmit)="handleSubmit()" class="reset-password-form">
        <div class="w-100 p-0">
          <label>New Password</label>
          <input type="password" placeholder="••••••••" formControlName="newPassword" required />
        </div>

        <div class="w-100 p-0">
          <label>Confirm New Password</label>
          <input
            type="password"
            placeholder="••••••••"
            formControlName="confirmNewPassword"
            required
          />
        </div>

        <div class="mb-4 p-3 rounded bg-light">
          <p class="mb-2 text-secondary small fw-semibold">Password must contain:</p>
          <ul class="list-unstyled mb-0">
            <li class="d-flex align-items-center gap-2 mb-1 text-secondary small">
              <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
              <span>At least 8 characters</span>
            </li>
            <li class="d-flex align-items-center gap-2 mb-1 text-secondary small">
              <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
              <span>A mix of letters and numbers</span>
            </li>
            <li class="d-flex align-items-center gap-2 text-secondary small">
              <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
              <span>At least one special character</span>
            </li>
          </ul>
        </div>

        <button
          type="submit"
          class="w-100 btn-primary text-white"
          [disabled]="!resetPasswordForm.valid"
        >
          Reset Password
        </button>

        <div class="text-center pt-3">
          <a
            routerLink="/forgot-password"
            class="small text-primary text-decoration-none d-inline-flex align-items-center gap-1"
          >
            <lucide-icon [name]="ArrowLeft" [size]="16"></lucide-icon>
            Back to Resend Email
          </a>
        </div>
      </form>

      <!-- is not submitted-->
      <!--
      <div class="forgot-password-submitted">
        <div class="d-flex justify-content-center">
          <div
            class="forgot-password-success-icon bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center"
          >
            <lucide-icon [name]="Mail" [size]="32" class="text-success"></lucide-icon>
          </div>
        </div>

        <div class="text-center">
          <p class="small text-secondary mb-2">We've sent a password reset link to</p>
          <p class="text-primary-green fw-bold">{{ email }}</p>
        </div>

        <div class="forgot-password-help p-3 bg-light rounded">
          <p class="small text-secondary mb-2">Didn't receive the email?</p>
          <ul class="small text-secondary list-unstyled mb-0">
            <li>• Check your spam folder</li>
            <li>• Make sure the email address is correct</li>
            <li>• Wait a few minutes and try again</li>
          </ul>
        </div>

        <button class="w-100 bg-white tryemail" (click)="isSubmitted = false">
          Try Another Email
        </button>

      <div class="text-center pt-2">
          <a
            routerLink="/login"
            class="small text-primary text-decoration-none d-inline-flex align-items-center gap-1"
          >
            <lucide-icon [name]="ArrowLeft" [size]="16"></lucide-icon>
            Back to Login
          </a>
        </div>
      </div>
       -->
    </mat-card-content>
  </mat-card>
</div>

<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reset Password</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
          sans-serif;
      }

      .bg-primary-custom {
        background-color: #3d6a5c !important;
      }

      .btn-primary-custom {
        background-color: #3d6a5c !important;
        border-color: #3d6a5c !important;
      }

      .btn-primary-custom:hover:not(:disabled) {
        background-color: #2d5449 !important;
        border-color: #2d5449 !important;
      }

      .btn-help {
        background-color: #2d5449 !important;
        border: none;
      }

      .btn-help:hover {
        background-color: #1f3d33 !important;
        opacity: 0.9;
      }

      .bg-success-light {
        background-color: #d4f4dd !important;
      }

      .form-control:focus {
        border-color: #3d6a5c !important;
        box-shadow: 0 0 0 0.2rem rgba(61, 106, 92, 0.25) !important;
      }

      .form-control:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .timer-pulse {
        animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      @keyframes slideDown {
        from {
          transform: translate(-50%, -100%);
          opacity: 0;
        }
        to {
          transform: translate(-50%, 0);
          opacity: 1;
        }
      }

      .success-toast {
        animation: slideDown 0.3s ease-out;
      }

      .btn-link:focus {
        box-shadow: none !important;
      }

      .btn-link:disabled {
        cursor: not-allowed;
      }

      .password-toggle {
        cursor: pointer;
        background: none;
        border: none;
        padding: 0.5rem 1rem;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="min-vh-100 d-flex align-items-center justify-content-center p-4 bg-primary-custom">
      Success Message
      <div
        id="successToast"
        class="hidden position-fixed top-0 start-50 translate-middle-x mt-4 bg-white rounded shadow-lg p-3 d-flex align-items-center gap-3 success-toast"
        style="min-width: 300px; z-index: 1050"
      >
        <div
          class="d-flex align-items-center justify-content-center rounded-circle bg-success-light"
          style="width: 40px; height: 40px"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="#2d8659"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <span class="text-success fw-semibold">Password reset successfully!</span>
      </div>

     Main Card
      <div class="bg-white rounded-4 shadow-lg p-4 p-md-5 w-100" style="max-width: 500px">
        Logo
        <div class="d-flex justify-content-center mb-4">
          <div
            class="rounded-3 d-flex align-items-center justify-content-center bg-primary-custom"
            style="width: 64px; height: 64px"
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M16 6C16 6 20 10 20 14C20 16.2091 18.2091 18 16 18C13.7909 18 12 16.2091 12 14C12 10 16 6 16 6Z"
                fill="white"
              />
              <path
                d="M16 18C16 18 12 22 12 26C12 28.2091 13.7909 30 16 30C18.2091 30 20 28.2091 20 26C20 22 16 18 16 18Z"
                fill="white"
                fill-opacity="0.6"
              />
            </svg>
          </div>
        </div>

      Header
        <div class="text-center mb-4">
          <h1 class="h3 mb-2 text-secondary">Reset Password</h1>
          <p class="text-muted">Enter your new password below</p>
        </div>

        Timer Warning
        <div
          id="timerBox"
          class="mb-4 p-3 rounded d-flex align-items-start gap-3 border-start border-4 bg-info-subtle border-success"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="#3d6a5c"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="flex-shrink-0 mt-1"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <div class="flex-grow-1">
            <p class="mb-1" id="timerText">Link expires in: <span id="timeDisplay">30:00</span></p>
            <a id="newLinkBtn" href="#" class="small text-decoration-underline text-primary hidden">
              Request a new link
            </a>
          </div>
        </div>

        Form
        <form id="resetForm">
          New Password Field
          <div class="mb-3">
            <label class="form-label text-secondary">New Password</label>
            <div class="position-relative">
              <input
                type="password"
                id="newPassword"
                placeholder="Enter new password"
                class="form-control form-control-lg bg-light border"
              />
              <button
                type="button"
                id="toggleNewPassword"
                class="btn btn-link position-absolute end-0 top-50 translate-middle-y text-muted password-toggle"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
            <div id="newPasswordError" class="text-danger small mt-1 hidden"></div>
          </div>

         Confirm Password Field
          <div class="mb-4">
            <label class="form-label text-secondary">Confirm Password</label>
            <div class="position-relative">
              <input
                type="password"
                id="confirmPassword"
                placeholder="Confirm new password"
                class="form-control form-control-lg bg-light border"
              />
              <button
                type="button"
                id="toggleConfirmPassword"
                class="btn btn-link position-absolute end-0 top-50 translate-middle-y text-muted password-toggle"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
            <div id="confirmPasswordError" class="text-danger small mt-1 hidden"></div>
          </div>

           Password Requirements
          <div class="mb-4 p-3 rounded bg-light">
            <p class="mb-2 text-secondary small fw-semibold">Password must contain:</p>
            <ul class="list-unstyled mb-0">
              <li class="d-flex align-items-center gap-2 mb-1 text-secondary small">
                <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
                <span>At least 8 characters</span>
              </li>
              <li class="d-flex align-items-center gap-2 mb-1 text-secondary small">
                <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
                <span>A mix of letters and numbers</span>
              </li>
              <li class="d-flex align-items-center gap-2 text-secondary small">
                <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
                <span>At least one special character</span>
              </li>
            </ul>
          </div>

          Submit Button
          <button
            type="submit"
            id="submitBtn"
            class="btn btn-lg w-100 text-white btn-primary-custom"
          >
            Reset Password
          </button>
        </form>

        Back to Login Link
        <div class="text-center mt-4">
          <a
            href="#"
            class="text-decoration-none text-primary d-inline-flex align-items-center gap-2"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M10 12L6 8L10 4"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            Back to Login
          </a>
        </div>
      </div>

      Help Button
      <button
        class="btn rounded-circle position-fixed bottom-0 end-0 m-4 text-white shadow-lg btn-help"
        style="width: 48px; height: 48px"
      >
        <span class="fs-5">?</span>
      </button>
    </div>

    <script>
      let timeLeft = 30 * 60; // 30 minutes in seconds
      let isExpired = false;
      let timerInterval;

      const eyeIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
        </svg>`;

      const eyeOffIcon = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
            <line x1="1" y1="1" x2="23" y2="23"></line>
        </svg>`;

      function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      }

      function updateTimer() {
        if (timeLeft <= 0) {
          isExpired = true;
          clearInterval(timerInterval);

          const timerBox = document.getElementById('timerBox');
          timerBox.className =
            'mb-4 p-3 rounded d-flex align-items-start gap-3 border-start border-4 bg-danger-subtle border-danger';
          timerBox.querySelector('svg').setAttribute('stroke', '#e53e3e');

          document.getElementById('timerText').innerHTML = 'This password reset link has expired.';
          document.getElementById('newLinkBtn').classList.remove('hidden');

          document.getElementById('newPassword').disabled = true;
          document.getElementById('confirmPassword').disabled = true;
          document.getElementById('submitBtn').disabled = true;
          document.getElementById('toggleNewPassword').disabled = true;
          document.getElementById('toggleConfirmPassword').disabled = true;

          return;
        }

        document.getElementById('timeDisplay').textContent = formatTime(timeLeft);

        if (timeLeft < 300 && timeLeft >= 0) {
          const timerBox = document.getElementById('timerBox');
          timerBox.className =
            'mb-4 p-3 rounded d-flex align-items-start gap-3 border-start border-4 bg-warning-subtle border-warning';
          timerBox.querySelector('svg').setAttribute('stroke', '#f59e0b');
          document.getElementById('timeDisplay').classList.add('timer-pulse');
        }

        timeLeft--;
      }

      // Toggle password visibility
      document.getElementById('toggleNewPassword').addEventListener('click', function () {
        const input = document.getElementById('newPassword');
        if (input.type === 'password') {
          input.type = 'text';
          this.innerHTML = eyeOffIcon;
        } else {
          input.type = 'password';
          this.innerHTML = eyeIcon;
        }
      });

      document.getElementById('toggleConfirmPassword').addEventListener('click', function () {
        const input = document.getElementById('confirmPassword');
        if (input.type === 'password') {
          input.type = 'text';
          this.innerHTML = eyeOffIcon;
        } else {
          input.type = 'password';
          this.innerHTML = eyeIcon;
        }
      });

      // Form submission
      document.getElementById('resetForm').addEventListener('submit', function (e) {
        e.preventDefault();

        if (isExpired) return;

        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        let hasError = false;

        // Clear previous errors
        document.getElementById('newPasswordError').classList.add('hidden');
        document.getElementById('confirmPasswordError').classList.add('hidden');
        document.getElementById('newPassword').classList.remove('border-danger');
        document.getElementById('confirmPassword').classList.remove('border-danger');

        // Validate new password
        if (newPassword.length < 8) {
          document.getElementById('newPasswordError').textContent =
            'Password must be at least 8 characters long';
          document.getElementById('newPasswordError').classList.remove('hidden');
          document.getElementById('newPassword').classList.add('border-danger');
          hasError = true;
        }

        // Validate confirm password
        if (newPassword !== confirmPassword) {
          document.getElementById('confirmPasswordError').textContent = 'Passwords do not match';
          document.getElementById('confirmPasswordError').classList.remove('hidden');
          document.getElementById('confirmPassword').classList.add('border-danger');
          hasError = true;
        }

        if (!hasError) {
          // Show success message
          document.getElementById('successToast').classList.remove('hidden');

          // Redirect after 2 seconds
          setTimeout(() => {
            alert('Redirecting to login page...');
          }, 2000);
        }
      });

      // Start timer
      timerInterval = setInterval(updateTimer, 1000);
      updateTimer();
    </script>
  </body>
</html> -->
