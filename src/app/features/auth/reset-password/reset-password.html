<div class="reset-password-container">
  <div class="reset-password-background">
    <div class="reset-password-blur reset-password-blur-1"></div>
    <div class="reset-password-blur reset-password-blur-2"></div>
  </div>

  <mat-card class="reset-password-card">
    <mat-card-header class="text-center pb-4 d-flex flex-column-reverse">
      <div class="d-flex justify-content-center mb-3">
        <div
          class="reset-password-icon-container bg-primary-green rounded d-flex align-items-center justify-content-center"
        >
          <lucide-icon [name]="Leaf" [size]="40" class="text-white"></lucide-icon>
        </div>
      </div>
      <mat-card-title class="h3 text-dark">Reset Password</mat-card-title>
      <mat-card-subtitle>Enter your new password below</mat-card-subtitle>
      <mat-card-title class="h4 text-dark mt-2">The Link Expire in 30 Minutes</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <!-- @if(!isSubmitted){-->
      <form [formGroup]="resetPasswordForm" (ngSubmit)="handleSubmit()" class="reset-password-form">
        <div class="w-100 p-0">
          <label>New Password</label>
          <div class="relative">
            <input
              [class.error-border]="hasError('newPassword')"
              [type]="showPassword ? 'text' : 'password'"
              placeholder="••••••••"
              formControlName="newPassword"
              required
            />

            <button
              type="button"
              class="position-absolute top-50 end-0 translate-middle-y btn btn-link p-0 pe-3"
              style="border: none; box-shadow: none"
              (click)="togglePassword()"
            >
              <i class="bi passicon" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
            </button>
          </div>
          @if(hasError('newPassword')){

          <p class="error text-danger mb-0 d-flex gap-1 mt-2 align-items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-circle-alert w-4 h-4"
              aria-hidden="true"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" x2="12" y1="8" y2="12"></line>
              <line x1="12" x2="12.01" y1="16" y2="16"></line>
            </svg>
            {{ errorMessage('newPassword') }}
          </p>
          }
        </div>

        <div class="w-100 p-0">
          <label>Confirm New Password</label>
          <div class="relative">
            <input
              [class.error-border]="hasError('confirmNewPassword')"
              [type]="showConfirmPassword ? 'text' : 'password'"
              placeholder="••••••••"
              formControlName="confirmNewPassword"
              required
            />
            <button
              type="button"
              class="position-absolute top-50 end-0 translate-middle-y btn btn-link p-0 pe-3"
              style="border: none; box-shadow: none"
              (click)="togglePassword('confirm')"
            >
              <i
                class="bi passicon"
                [ngClass]="showConfirmPassword ? 'bi-eye-slash' : 'bi-eye'"
              ></i>
            </button>
          </div>
          @if(hasError('confirmNewPassword')){

          <p class="error text-danger mb-0 d-flex gap-1 mt-2 align-items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-circle-alert w-4 h-4"
              aria-hidden="true"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" x2="12" y1="8" y2="12"></line>
              <line x1="12" x2="12.01" y1="16" y2="16"></line>
            </svg>
            {{ errorMessage('confirmNewPassword') }}
          </p>
          }
        </div>

        <div class="mb-4 p-3 rounded bg-light">
          <p class="mb-2 text-secondary small fw-semibold">Password must contain:</p>
          <ul class="list-unstyled mb-0">
            <li class="d-flex align-items-center gap-2 mb-1 text-secondary small">
              <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
              <span>At least 8 characters</span>
            </li>
            <li class="d-flex align-items-center gap-2 mb-1 text-secondary small">
              <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
              <span>A mix of letters and numbers</span>
            </li>
            <li class="d-flex align-items-center gap-2 text-secondary small">
              <span class="rounded-circle bg-secondary" style="width: 6px; height: 6px"></span>
              <span>At least one special character</span>
            </li>
          </ul>
        </div>

        <button type="submit" class="w-100 btn-primary text-white">Reset Password</button>

        <div class="text-center pt-3">
          <a
            routerLink="/forgot-password"
            class="small text-primary text-decoration-none d-inline-flex align-items-center gap-1"
          >
            <lucide-icon [name]="ArrowLeft" [size]="16"></lucide-icon>
            Back to Resend Email
          </a>
        </div>
      </form>

    
    </mat-card-content>
  </mat-card>
</div>

