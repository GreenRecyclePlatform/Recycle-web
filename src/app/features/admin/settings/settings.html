<app-navbar></app-navbar>
<div class="d-flex">
  <app-admin-sidebar></app-admin-sidebar>
 

<div class="container-fluid py-4">
  <!-- Loading Overlay -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="spinner-border text-success" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading settings...</p>
  </div>

  <div class="mb-4">
    <h1 class="text-dark mb-2">Platform Settings</h1>
    <p class="text-muted">Configure and manage platform settings</p>
  </div>

  <!-- Tabs Navigation -->
  <ul class="nav nav-tabs mb-4" role="tablist">
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="activeTab === 'platform'"
        (click)="setActiveTab('platform')"
        type="button">
        <i class="bi bi-gear me-2"></i>Platform
      </button>
    </li>
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="activeTab === 'pricing'"
        (click)="setActiveTab('pricing')"
        type="button">
        <i class="bi bi-currency-dollar me-2"></i>Pricing
      </button>
    </li>
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="activeTab === 'notifications'"
        (click)="setActiveTab('notifications')"
        type="button">
        <i class="bi bi-bell me-2"></i>Notifications
      </button>
    </li>
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="activeTab === 'operations'"
        (click)="setActiveTab('operations')"
        type="button">
        <i class="bi bi-truck me-2"></i>Operations
      </button>
    </li>
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="activeTab === 'payment'"
        (click)="setActiveTab('payment')"
        type="button">
        <i class="bi bi-shield-check me-2"></i>Payment
      </button>
    </li>
  </ul>

  <!-- Tab Content -->
  <div class="tab-content">

    <!-- Platform Settings Tab -->
    <div *ngIf="activeTab === 'platform'" class="tab-pane fade show active">
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-1">General Information</h5>
          <p class="text-muted mb-0 small">Basic platform configuration and contact details</p>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="platformName" class="form-label">Platform Name *</label>
              <input
                type="text"
                class="form-control"
                id="platformName"
                [(ngModel)]="platformSettings.platformName">
            </div>

            <div class="col-md-6">
              <label for="platformEmail" class="form-label">Support Email *</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                <input
                  type="email"
                  class="form-control"
                  id="platformEmail"
                  [(ngModel)]="platformSettings.platformEmail">
              </div>
            </div>

            <div class="col-md-6">
              <label for="platformPhone" class="form-label">Support Phone *</label>
              <input
                type="tel"
                class="form-control"
                id="platformPhone"
                [(ngModel)]="platformSettings.platformPhone">
            </div>

            <div class="col-md-6">
              <label for="timezone" class="form-label">Timezone *</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-globe"></i></span>
                <select
                  class="form-select"
                  id="timezone"
                  [(ngModel)]="platformSettings.timezone">
                  <option *ngFor="let tz of timezones" [value]="tz.value">{{ tz.label }}</option>
                </select>
              </div>
            </div>

            <div class="col-md-6">
              <label for="currency" class="form-label">Currency *</label>
              <select
                class="form-select"
                id="currency"
                [(ngModel)]="platformSettings.currency">
                <option *ngFor="let curr of currencies" [value]="curr.value">{{ curr.label }}</option>
              </select>
            </div>

            <div class="col-md-6">
              <label for="language" class="form-label">Default Language *</label>
              <select
                class="form-select"
                id="language"
                [(ngModel)]="platformSettings.language">
                <option *ngFor="let lang of languages" [value]="lang.value">{{ lang.label }}</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button
          class="btn btn-success"
          (click)="handleSaveSettings('Platform')"
          [disabled]="isSaving">
          <span *ngIf="!isSaving">
            <i class="bi bi-save me-2"></i>Save Platform Settings
          </span>
          <span *ngIf="isSaving">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Saving...
          </span>
        </button>
      </div>
    </div>

    <!-- Pricing Settings Tab -->
    <div *ngIf="activeTab === 'pricing'" class="tab-pane fade show active">
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-1">Material Pricing</h5>
          <p class="text-muted mb-0 small">Set prices per kg for different material types</p>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-4">
              <label for="plasticPrice" class="form-label">Plastic (per kg)</label>
              <div class="input-group">
                <span class="input-group-text">₹</span>
                <input
                  type="number"
                  class="form-control"
                  id="plasticPrice"
                  [(ngModel)]="pricingSettings.plasticPrice">
              </div>
            </div>

            <div class="col-md-4">
              <label for="paperPrice" class="form-label">Paper (per kg)</label>
              <div class="input-group">
                <span class="input-group-text">₹</span>
                <input
                  type="number"
                  class="form-control"
                  id="paperPrice"
                  [(ngModel)]="pricingSettings.paperPrice">
              </div>
            </div>

            <div class="col-md-4">
              <label for="cardboardPrice" class="form-label">Cardboard (per kg)</label>
              <div class="input-group">
                <span class="input-group-text">₹</span>
                <input
                  type="number"
                  class="form-control"
                  id="cardboardPrice"
                  [(ngModel)]="pricingSettings.cardboardPrice">
              </div>
            </div>

            <div class="col-md-4">
              <label for="electronicsPrice" class="form-label">Electronics (per kg)</label>
              <div class="input-group">
                <span class="input-group-text">₹</span>
                <input
                  type="number"
                  class="form-control"
                  id="electronicsPrice"
                  [(ngModel)]="pricingSettings.electronicsPrice">
              </div>
            </div>

            <div class="col-md-4">
              <label for="metalsPrice" class="form-label">Metals (per kg)</label>
              <div class="input-group">
                <span class="input-group-text">₹</span>
                <input
                  type="number"
                  class="form-control"
                  id="metalsPrice"
                  [(ngModel)]="pricingSettings.metalsPrice">
              </div>
            </div>

            <div class="col-md-4">
              <label for="glassPrice" class="form-label">Glass (per kg)</label>
              <div class="input-group">
                <span class="input-group-text">₹</span>
                <input
                  type="number"
                  class="form-control"
                  id="glassPrice"
                  [(ngModel)]="pricingSettings.glassPrice">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-1">Business Pricing</h5>
          <p class="text-muted mb-0 small">Configure commission rates and minimum values</p>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="commissionRate" class="form-label">Platform Commission (%)</label>
              <input
                type="number"
                class="form-control"
                id="commissionRate"
                [(ngModel)]="pricingSettings.commissionRate">
            </div>

            <div class="col-md-6">
              <label for="minimumOrderValue" class="form-label">Minimum Order Value (₹)</label>
              <input
                type="number"
                class="form-control"
                id="minimumOrderValue"
                [(ngModel)]="pricingSettings.minimumOrderValue">
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button
          class="btn btn-success"
          (click)="handleSaveSettings('Pricing')"
          [disabled]="isSaving">
          <span *ngIf="!isSaving">
            <i class="bi bi-save me-2"></i>Save Pricing Settings
          </span>
          <span *ngIf="isSaving">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Saving...
          </span>
        </button>
      </div>
    </div>

    <!-- Notification Settings Tab -->
    <div *ngIf="activeTab === 'notifications'" class="tab-pane fade show active">
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-1">Notification Channels</h5>
          <p class="text-muted mb-0 small">Enable or disable notification channels</p>
        </div>
        <div class="card-body">
          <div class="list-group list-group-flush">
            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">Email Notifications</h6>
                <p class="text-muted mb-0 small">Send notifications via email</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="emailNotifications"
                  [(ngModel)]="notificationSettings.emailNotifications">
              </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">SMS Notifications</h6>
                <p class="text-muted mb-0 small">Send notifications via SMS</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="smsNotifications"
                  [(ngModel)]="notificationSettings.smsNotifications">
              </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">Push Notifications</h6>
                <p class="text-muted mb-0 small">Send push notifications to mobile apps</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="pushNotifications"
                  [(ngModel)]="notificationSettings.pushNotifications">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-1">Alert Preferences</h5>
          <p class="text-muted mb-0 small">Configure what events trigger admin notifications</p>
        </div>
        <div class="card-body">
          <div class="list-group list-group-flush">
            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">New Request Alert</h6>
                <p class="text-muted mb-0 small">Get notified when new pickup request is submitted</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="newRequestAlert"
                  [(ngModel)]="notificationSettings.newRequestAlert">
              </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">Pickup Complete Alert</h6>
                <p class="text-muted mb-0 small">Get notified when driver completes a pickup</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="pickupCompleteAlert"
                  [(ngModel)]="notificationSettings.pickupCompleteAlert">
              </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">Low Inventory Alert</h6>
                <p class="text-muted mb-0 small">Get notified when material inventory is low</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="lowInventoryAlert"
                  [(ngModel)]="notificationSettings.lowInventoryAlert">
              </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">New Order Alert</h6>
                <p class="text-muted mb-0 small">Get notified when factory places new order</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="newOrderAlert"
                  [(ngModel)]="notificationSettings.newOrderAlert">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button
          class="btn btn-success"
          (click)="handleSaveSettings('Notification')"
          [disabled]="isSaving">
          <span *ngIf="!isSaving">
            <i class="bi bi-save me-2"></i>Save Notification Settings
          </span>
          <span *ngIf="isSaving">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Saving...
          </span>
        </button>
      </div>
    </div>

    <!-- Operations Settings Tab -->
    <div *ngIf="activeTab === 'operations'" class="tab-pane fade show active">
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-1">Automation Settings</h5>
          <p class="text-muted mb-0 small">Configure automatic processes</p>
        </div>
        <div class="card-body">
          <div class="list-group list-group-flush">
            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">Auto-Approve Requests</h6>
                <p class="text-muted mb-0 small">Automatically approve pickup requests without manual review</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="autoApproveRequests"
                  [(ngModel)]="operationalSettings.autoApproveRequests">
              </div>
            </div>

            <div class="list-group-item d-flex justify-content-between align-items-center bg-light">
              <div>
                <h6 class="mb-1">Auto-Assign Drivers</h6>
                <p class="text-muted mb-0 small">Automatically assign nearest available driver</p>
              </div>
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="autoAssignDrivers"
                  [(ngModel)]="operationalSettings.autoAssignDrivers">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-1">Operational Limits</h5>
          <p class="text-muted mb-0 small">Set operational constraints and working hours</p>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="workingHoursStart" class="form-label">Working Hours Start</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-clock"></i></span>
                <input
                  type="time"
                  class="form-control"
                  id="workingHoursStart"
                  [(ngModel)]="operationalSettings.workingHoursStart">
              </div>
            </div>

            <div class="col-md-6">
              <label for="workingHoursEnd" class="form-label">Working Hours End</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-clock"></i></span>
                <input
                  type="time"
                  class="form-control"
                  id="workingHoursEnd"
                  [(ngModel)]="operationalSettings.workingHoursEnd">
              </div>
            </div>

            <div class="col-md-6">
              <label for="maxPickupsPerDriver" class="form-label">Max Pickups per Driver</label>
              <input
                type="number"
                class="form-control"
                id="maxPickupsPerDriver"
                [(ngModel)]="operationalSettings.maxPickupsPerDriver">
            </div>

            <div class="col-md-6">
              <label for="pickupSlotDuration" class="form-label">Pickup Slot Duration (minutes)</label>
              <input
                type="number"
                class="form-control"
                id="pickupSlotDuration"
                [(ngModel)]="operationalSettings.pickupSlotDuration">
            </div>

            <div class="col-md-6">
              <label for="minimumPickupWeight" class="form-label">Minimum Pickup Weight (kg)</label>
              <input
                type="number"
                class="form-control"
                id="minimumPickupWeight"
                [(ngModel)]="operationalSettings.minimumPickupWeight">
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button
          class="btn btn-success"
          (click)="handleSaveSettings('Operational')"
          [disabled]="isSaving">
          <span *ngIf="!isSaving">
            <i class="bi bi-save me-2"></i>Save Operational Settings
          </span>
          <span *ngIf="isSaving">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Saving...
          </span>
        </button>
      </div>
    </div>

    <!-- Payment Settings Tab -->
    <div *ngIf="activeTab === 'payment'" class="tab-pane fade show active">
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-1">Payment Configuration</h5>
          <p class="text-muted mb-0 small">Configure payment cycles and methods</p>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="paymentCycle" class="form-label">Payment Cycle</label>
              <select
                class="form-select"
                id="paymentCycle"
                [(ngModel)]="paymentSettings.paymentCycle">
                <option *ngFor="let cycle of paymentCycles" [value]="cycle.value">{{ cycle.label }}</option>
              </select>
            </div>

            <div class="col-md-6">
              <label for="paymentMethod" class="form-label">Default Payment Method</label>
              <select
                class="form-select"
                id="paymentMethod"
                [(ngModel)]="paymentSettings.paymentMethod">
                <option *ngFor="let method of paymentMethods" [value]="method.value">{{ method.label }}</option>
              </select>
            </div>

            <div class="col-md-6">
              <label for="gatewayFee" class="form-label">Payment Gateway Fee (%)</label>
              <input
                type="number"
                class="form-control"
                id="gatewayFee"
                [(ngModel)]="paymentSettings.paymentGatewayFee">
            </div>

            <div class="col-md-6">
              <label for="processingTime" class="form-label">Processing Time (days)</label>
              <input
                type="number"
                class="form-control"
                id="processingTime"
                [(ngModel)]="paymentSettings.processingTime">
            </div>
          </div>
        </div>
      </div>

      <div class="card border-success mb-4">
        <div class="card-body">
          <div class="d-flex align-items-start gap-3">
            <div class="flex-shrink-0">
              <div class="bg-success bg-opacity-10 rounded-circle p-3">
                <i class="bi bi-shield-check text-success fs-4"></i>
              </div>
            </div>
            <div>
              <h5 class="card-title">Security Notice</h5>
              <p class="card-text text-muted mb-0">
                Payment settings affect financial transactions. Ensure all changes are reviewed carefully.
                All payment data is encrypted and stored securely according to industry standards.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button
          class="btn btn-success"
          (click)="handleSaveSettings('Payment')"
          [disabled]="isSaving">
          <span *ngIf="!isSaving">
            <i class="bi bi-save me-2"></i>Save Payment Settings
          </span>
          <span *ngIf="isSaving">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Saving...
          </span>
        </button>
      </div>
    </div>

  </div>
</div>  </div>




