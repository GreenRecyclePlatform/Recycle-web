<!-- âœ… Add Page Link -->
<a routerLink="/admin/payments" routerLinkActive="active">
  


<div class="admin-payments-container">
  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    <i class="fas fa-exclamation-triangle"></i>
    {{ error }}
    <button (click)="loadData()" class="retry-btn">Retry</button>
  </div>

  <!-- Main Content -->
  <div *ngIf="!loading && !error">
    <!-- Page Header -->
    <div class="page-header">
      <h1><i class="fas fa-money-bill-wave"></i> Payments Management</h1>
    
    </div>

    <!-- Statistics Cards -->
    <div class="stats-grid" *ngIf="stats">
      <div class="stat-card revenue">
        <div class="stat-icon">
          <i class="fas fa-dollar-sign"></i>
        </div>
        <div class="stat-content">
          <h3>Total Revenue</h3>
          <p class="stat-value">{{ formatCurrency(stats!.totalRevenue) }}</p>
        </div>
      </div>

      <div class="stat-card completed">
        <div class="stat-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-content">
          <h3>Completed Orders</h3>
          <p class="stat-value">{{ stats!.completedOrdersCount }}</p>
        </div>
      </div>

      <div class="stat-card pending">
        <div class="stat-icon">
          <i class="fas fa-clock"></i>
        </div>
        <div class="stat-content">
          <h3>Pending Payments</h3>
          <p class="stat-value">{{ formatCurrency(stats!.pendingPayments) }}</p>
        </div>
      </div>
    </div>

  

    <!-- All Orders Section -->
    <div class="all-orders-section">
      <div class="section-header">
        <h2><i class="fas fa-list"></i> All Orders</h2>

        <!-- Filters -->
        <div class="filters">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input
              type="text"
              placeholder="Search by supplier..."
              [(ngModel)]="searchTerm"
              (ngModelChange)="filterOrders()"
            />
          </div>

          <select [(ngModel)]="selectedStatus" (ngModelChange)="filterOrders()" class="status-filter">
            <option value="all">All Statuses</option>
            <option value="completed">Completed</option>
            <option value="pending">Pending</option>
            <option value="failed">Failed</option>
          </select>
        </div>
      </div>

      <!-- Orders Table -->
      <div class="orders-table-container">
        <table class="orders-table">
          <thead>
            <tr>
              <th>Supplier</th>
              <th>Total Amount</th>
              <th>Items</th>
              <th>Order Date</th>
              <th>Payment Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of paginatedOrders">
              <td class="supplier-name">
                <i class="fas fa-building"></i>
                {{ order.supplierName }}
              </td>
              <td class="amount">{{ formatCurrency(order.totalAmount) }}</td>
              <td class="items-count">
                <span class="badge-count">{{ order.itemsCount }}</span>
              </td>
              <td>{{ formatDate(order.orderDate) }}</td>
              <td>{{ order.paidAt ? formatDate(order.paidAt) : '-' }}</td>
              <td>
                <span class="status-badge" [ngClass]="getStatusClass(order.paymentStatus)">
                  {{ getStatusText(order.paymentStatus) }}
                </span>
              </td>
            
            </tr>
          </tbody>
        </table>

        <!-- Empty State -->
        <div *ngIf="paginatedOrders.length === 0" class="empty-state">
          <i class="fas fa-inbox"></i>
          <p>No orders found</p>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination" *ngIf="totalPages > 1">
        <button
          class="page-btn"
          (click)="previousPage()"
          [disabled]="currentPage === 1"
        >
          <i class="fas fa-chevron-right"></i>
        </button>

        <span class="page-info">
          Page {{ currentPage }} of {{ totalPages }}
        </span>

        <button
          class="page-btn"
          (click)="nextPage()"
          [disabled]="currentPage === totalPages"
        >
          <i class="fas fa-chevron-left"></i>
        </button>
      </div>
    </div>
  </div>

 
</div>
